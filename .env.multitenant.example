# ============================================
# FAF Multi-Tenant - Variables d'environnement
# ============================================
# Copier ce fichier vers .env et remplir les valeurs

# ============================================
# Supabase Configuration
# ============================================
# Créer un projet sur https://supabase.com/dashboard

# URL du projet Supabase (ex: https://xxxxx.supabase.co)
SUPABASE_URL=

# Clé anonyme (anon key) - Trouvée dans Settings > API
# Utilisée pour les opérations publiques (soumissions, consultations)
SUPABASE_ANON_KEY=

# Clé service role - Trouvée dans Settings > API
# ⚠️  CRITIQUE: Ne JAMAIS exposer côté client
# Utilisée pour les migrations, opérations admin, bypass RLS
SUPABASE_SERVICE_KEY=

# ============================================
# JWT Configuration
# ============================================
# Secret pour signer les tokens JWT (min 32 caractères)
# Générer avec: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=

# Expiration des tokens JWT (en jours)
JWT_EXPIRATION=7

# ============================================
# Cloudinary Configuration
# ============================================
# Configuration existante pour upload d'images
# Créer un compte sur https://cloudinary.com

CLOUDINARY_CLOUD_NAME=
CLOUDINARY_API_KEY=
CLOUDINARY_API_SECRET=

# ============================================
# Application Configuration
# ============================================
# URL de base de l'application (pour génération de liens)
APP_BASE_URL=http://localhost:3000

# URL frontend (si différent du backend)
FRONTEND_URL=http://localhost:3000

# Environment (development | production)
NODE_ENV=development

# Port du serveur (pour développement local)
PORT=3000

# ============================================
# Migration Configuration (optionnel)
# ============================================
# Variables pour migration MongoDB → Supabase

# URI MongoDB existant (pour backup avant migration)
MONGODB_URI=

# Email pour créer le compte admin Riri pendant la migration
RIRI_EMAIL=

# Mot de passe pour le compte admin Riri
RIRI_PASSWORD=

# ============================================
# Rate Limiting Configuration
# ============================================
# Limites de soumissions pour prévenir le spam

# Nombre max de soumissions par période
RATE_LIMIT_MAX=3

# Période en minutes
RATE_LIMIT_WINDOW=15

# ============================================
# Security Configuration
# ============================================
# Headers de sécurité (CORS, CSP, etc.)

# Domaine autorisé pour CORS (production)
CORS_ORIGIN=https://faf.vercel.app

# Domaine pour cookies (avec point pour sous-domaines)
COOKIE_DOMAIN=.faf.app

# ============================================
# Testing Configuration (optionnel)
# ============================================
# Variables pour exécuter les tests

# URL Supabase de test (peut être le même que production)
TEST_SUPABASE_URL=

# Clés Supabase de test
TEST_SUPABASE_ANON_KEY=
TEST_SUPABASE_SERVICE_KEY=

# ============================================
# Notes importantes
# ============================================

# 1. Supabase Setup:
#    - Créer un projet sur https://supabase.com/dashboard
#    - Exécuter les scripts SQL dans sql/01_create_tables.sql et sql/02_create_rls.sql
#    - Récupérer les clés dans Settings > API

# 2. JWT Secret:
#    - Générer un secret cryptographique fort (min 32 caractères)
#    - Ne jamais commiter le vrai secret dans Git
#    - Utiliser des secrets différents pour dev/staging/prod

# 3. Cloudinary:
#    - Réutiliser la configuration existante de FAF mono-admin
#    - Vérifier les quotas si augmentation du trafic

# 4. Migration:
#    - Les variables MONGODB_URI, RIRI_EMAIL, RIRI_PASSWORD sont nécessaires
#      uniquement pour la migration initiale
#    - Peuvent être supprimées après migration réussie

# 5. Security:
#    - Activer HTTPS en production (automatique avec Vercel)
#    - Configurer CORS_ORIGIN avec le vrai domaine
#    - Utiliser des cookies secure et sameSite=none en production

# 6. Testing:
#    - Utiliser un projet Supabase séparé pour les tests (recommandé)
#    - Ou utiliser le même projet avec des données de test isolées
